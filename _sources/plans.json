[
  {
    "code_template": {
      "changeable_areas": {
        "condition": [
          "condition",
          "COLUMN IS NULL",
          "COLUMN < 2",
          "column=1",
          "column='removal_value'",
          "grade < 60"
        ],
        "table": [
          "table_name",
          "student_grades"
        ]
      },
      "changeable_areas_annotations": {
        "condition": "A condition using a column in the table, such as checking whether the column is equal to/less than/greater than a specific value, or does not exist (is NULL).",
        "table": "Name of the table to delete from"
      },
      "changeable_areas_colors": {
        "condition": "#ccebc5",
        "table": "#ffe4a8"
      },
      "lines": [
        "DELETE FROM @@table@@",
        "WHERE @@condition@@;"
      ]
    },
    "goal": "Remove records where the value in a column meets a condition",
    "group": "3",
    "order": "1",
    "plan_metadata": {
      "description": "This is a plan",
      "instruction": "To use this plan, follow these steps...",
      "usage": "This plan is used when..."
    },
    "plan_name": "Remove Records",
    "id": 0
  },
  {
    "code_template": {
      "changeable_areas": {
        "column_to_check": [
          "column1",
          "likes",
          "artist_name"
        ],
        "column_to_update": [
          "column1",
          "column_name",
          "engagement_score",
          "award_status"
        ],
        "condition_value": [
          "min_val",
          "5",
          "'test@email.com'",
          "100",
          "'Grammy Winner'"
        ],
        "new_value": [
          "0",
          "'a_new_value'",
          "another_column_name",
          "other_column * 2",
          "engagement_score * 1.1",
          "'Awarded'"
        ],
        "table": [
          "table_name",
          "tiktok_engagement",
          "songs"
        ]
      },
      "changeable_areas_annotations": {
        "column_to_check": "The column for selecting the records that will be updated. This could be the same as the column to be updated, or a different column of the table.",
        "column_to_update": "The column whose values will be replaced with the new value.",
        "condition_value": "The value that the column will be checked against, which could be a numerical or string value.",
        "new_value": "New value for the column that will be updated, including numerical values, strings, or expressions with other columns.",
        "table": "Name of the table to update"
      },
      "changeable_areas_colors": {
        "column_to_check": "#f2f2f2",
        "column_to_update": "#e5d8bd",
        "condition_value": "#b3e2cd",
        "new_value": "#fddaec",
        "table": "#ffe4a8"
      },
      "lines": [
        "UPDATE @@table@@",
        "SET @@column_to_update@@ = @@new_value@@",
        "WHERE @@column_to_check@@ = @@condition_value@@;"
      ]
    },
    "goal": "Update the value of a column in all records meeting a condition",
    "group": "2",
    "order": "1",
    "plan_metadata": {
      "description": "This is a plan",
      "instruction": "To use this plan, follow these steps...",
      "usage": "This plan is used when..."
    },
    "plan_name": "Update Records Conditionally",
    "id": 1
  },
  {
    "code_template": {
      "changeable_areas": {
        "field_names": [
          "(name, email)",
          "(title, release_date, genre)"
        ],
        "field_values": [
          "field_values",
          "('Alice', 'alice@illinois.edu')",
          "('Bob', 'bob@illinois.edu')",
          "('Inception', '2010-07-16', 'Sci-Fi')"
        ],
        "table": [
          "users",
          "movies"
        ]
      },
      "changeable_areas_annotations": {
        "field_names": "The fields (columns) that will be specified for the inserted records. ",
        "field_values": "The values for the records that will be inserted, which are provided in the same order given in field_names.",
        "table": "The name of the table to be updated."
      },
      "changeable_areas_colors": {
        "field_names": "#f1c9fe",
        "field_values": "#ffffcc",
        "table": "#ffd9a8"
      },
      "lines": [
        "INSERT INTO @@table@@ @@field_names@@ VALUES @@field_values@@ "
      ]
    },
    "goal": "Insert a new record (row) into the specified table with values for specified columns",
    "group": "4",
    "order": "1",
    "plan_metadata": {
      "description": "This is a plan",
      "instruction": "To use this plan, follow these steps...",
      "usage": "This plan is used when..."
    },
    "plan_name": "Add New Record",
    "id": 2
  },
  {
    "code_template": {
      "changeable_areas": {
        "column": [
          "column_name",
          "unnecessary_metric"
        ],
        "table": [
          "table_name",
          "tiktok_engagement"
        ]
      },
      "changeable_areas_annotations": {
        "column": "The column to be removed.",
        "table": "The table to be updated."
      },
      "changeable_areas_colors": {
        "column": "#ffd9a8",
        "table": "#ffd9a8"
      },
      "lines": [
        "ALTER TABLE @@table@@",
        "DROP COLUMN @@column@@;"
      ]
    },
    "goal": "Alter the existing table to remove an unnecessary column",
    "group": "1",
    "order": "11",
    "plan_metadata": {
      "description": "This is a plan",
      "instruction": "To use this plan, follow these steps...",
      "usage": "This plan is used when..."
    },
    "plan_name": "Drop Column",
    "id": 3,
    "questions": [
      {
        "type": "MCQ",
        "question_id": "MCQ_1",
        "distractors": [
          "ALTER TABLE Books REMOVE COLUMN Edition;",
          "DELETE COLUMN Edition FROM Books;",
          "ALTER TABLE Books DELETE Edition;"
        ],
        "feedback": [
          "The SQL command to remove a column is 'DROP COLUMN', not 'REMOVE COLUMN'.",
          "The syntax for deleting a column is incorrect. You need to use 'ALTER TABLE ... DROP COLUMN'.",
          "The correct SQL syntax is 'ALTER TABLE ... DROP COLUMN', not 'DELETE COLUMN'."
        ],
        "stem": "You are working with a database for a library management system. The table 'Books' contains a column 'Edition' that is no longer needed. How would you remove this column from the 'Books' table?",
        "correct": "ALTER TABLE Books DROP COLUMN Edition;"
      }
    ]
  },
  {
    "code_template": {
      "changeable_areas": {
        "aggregation_func": [
          "COUNT",
          "SUM",
          "MAX",
          "MIN",
          "AVG"
        ],
        "column_to_process": [
          "column_name",
          "column1, column_2",
          "title"
        ],
        "optional_column_to_group": [
          "column_name",
          "genre"
        ],
        "table": [
          "table_name",
          "movies"
        ]
      },
      "changeable_areas_annotations": {
        "aggregation_func": "A function that will process the values in each group and return a single summary value.",
        "column_to_process": "The column(s) over which the aggregation function will be run.",
        "optional_column_to_group": "Optional value - omit if you want to calculate statistics over all records. The column name that records will be grouped by. When you run this query, all the records with the same value in this column will be grouped together, and the aggregation function will be executed separately for each group.",
        "table": "Name of the table to be examined."
      },
      "changeable_areas_colors": {
        "aggregation_func": "#fbb4ae",
        "column_to_process": "#f2f2f2",
        "optional_column_to_group": "#b3e2cd",
        "table": "#fddaec"
      },
      "lines": [
        "SELECT @@optional_column_to_group@@, @@aggregation_func@@(@@column_to_process@@) ",
        "FROM @@table@@ ",
        "GROUP BY @@optional_column_to_group@@;"
      ]
    },
    "goal": "Calculate aggregated summary statistics for the whole table, or for subsets of the table",
    "group": "4",
    "order": 2,
    "plan_metadata": {
      "description": "This is a plan",
      "instruction": "To use this plan, follow these steps...",
      "usage": "This plan is used when..."
    },
    "plan_name": "Summarize Records",
    "id": 4
  },
  {
    "code_template": {
      "changeable_areas": {
        "column_to_sort_by": [
          "column_name",
          "release_date"
        ],
        "order_direction": [
          "ASC",
          "DESC"
        ],
        "table": [
          "table_name",
          "songs"
        ]
      },
      "changeable_areas_annotations": {
        "column_to_sort_by": "The column that will be used for sorting the records.",
        "order_direction": "The direction for the table to be sorted (ascending or descending)",
        "table": "Name of the table to be examined."
      },
      "changeable_areas_colors": {
        "column_to_sort_by": "#fff2ae",
        "order_direction": "#decbe4",
        "table": "#e6f5c9"
      },
      "lines": [
        "SELECT * FROM @@table@@",
        "ORDER BY @@column_to_sort_by@@ @@order_direction@@;",
        ""
      ]
    },
    "goal": "View records sorted in a given order",
    "group": "2",
    "order": 2,
    "plan_metadata": {
      "description": "This is a plan",
      "instruction": "To use this plan, follow these steps...",
      "usage": "This plan is used when..."
    },
    "plan_name": "Order Records",
    "id": 5
  },
  {
    "code_template": {
      "changeable_areas": {
        "column_or_columns": [
          "column1, column2, column3",
          "column_name",
          "*",
          "student_id, name, grade"
        ],
        "table": [
          "table_name",
          "student_grades"
        ]
      },
      "changeable_areas_annotations": {
        "column_or_columns": "Names of the fields (columns) to be viewed as a list separated by commas, or just a single column name, or an asterisk for all columns.",
        "table": "Name of the table to be examined."
      },
      "changeable_areas_colors": {
        "column_or_columns": "#cbd5e8",
        "table": "#f4cae4"
      },
      "lines": [
        "SELECT @@column_or_columns@@",
        "FROM @@table@@;"
      ]
    },
    "goal": "Select and view columns from the specified table",
    "group": "3",
    "order": 2,
    "plan_metadata": {
      "description": "This is a plan",
      "instruction": "To use this plan, follow these steps...",
      "usage": "This plan is used when..."
    },
    "plan_name": "View Records",
    "id": 6
  },
  {
    "code_template": {
      "changeable_areas": {
        "column_to_process": [
          "column_name",
          "column1, column_2",
          "likes"
        ],
        "processing_function": [
          "processing_function",
          "LENGTH",
          "AVG"
        ],
        "table": [
          "table_name",
          "tiktok_engagement"
        ]
      },
      "changeable_areas_annotations": {
        "column_to_process": "The column(s) over which the processing function will be run.",
        "processing_function": "A function that will process the values and return a processed value for each record.",
        "table": "Name of the table to be examined."
      },
      "changeable_areas_colors": {
        "column_to_process": "#f2f2f2",
        "processing_function": "#fdcdac",
        "table": "#fddaec"
      },
      "lines": [
        "SELECT @@processing_function@@(@@column_to_process@@) ",
        "FROM @@table@@;",
        ""
      ]
    },
    "goal": "Calculate aggregated summary statistics for the whole table, or for subsets of the table",
    "group": "1",
    "order": 12,
    "plan_metadata": {
      "description": "This is a plan",
      "instruction": "To use this plan, follow these steps...",
      "usage": "This plan is used when..."
    },
    "plan_name": "View Processed Records",
    "id": 7,
    "questions": [
      {
        "type": "MCQ",
        "question_id": "MCQ_1",
        "stem": "You are given a database table named 'students' with columns 'name', 'age', and 'grade'. You need to calculate the average grade of all students. Which SQL query correctly uses the 'View Processed Records' plan to achieve this?",
        "correct": "SELECT AVG(grade) FROM students;",
        "distractors": [
          "SELECT LENGTH(grade) FROM students;",
          "SELECT AVG(age) FROM students;",
          "SELECT SUM(grade) FROM students;"
        ],
        "feedback": [
          "The LENGTH function is used to calculate the length of a string, not to find an average.",
          "This query calculates the average age, not the grade.",
          "This query sums up the grades instead of calculating the average."
        ]
      },
      {
        "type": "Fill in the Blank",
        "question_id": "Fill in the Blank_1",
        "stem": "Suppose you have a database table named 'sales_data' which contains information about sales transactions. You want to calculate the sum of all sales figures in a column named 'total_sales'. Fill in the blank in the SQL query template to achieve this.",
        "area": "processing_function",
        "correct": "SUM"
      }
    ]
  },
  {
    "code_template": {
      "changeable_areas": {
        "column_to_check": [
          "column1",
          "likes",
          "artist_name"
        ],
        "column_to_update": [
          "column1",
          "column_name",
          "engagement_score",
          "award_status"
        ],
        "condition_value": [
          "min_val",
          "5",
          "'test@email.com'",
          "100",
          "'Grammy Winner'"
        ],
        "new_value": [
          "0",
          "'a_new_value'",
          "another_column_name",
          "other_column * 2",
          "engagement_score * 1.1",
          "'Awarded'"
        ],
        "table": [
          "table_name",
          "tiktok_engagement",
          "songs"
        ]
      },
      "changeable_areas_annotations": {
        "column_to_check": "The column for selecting the records that will be updated. This could be the same as the column to be updated, or a different column of the table.",
        "column_to_update": "The column whose values will be replaced with the new value.",
        "condition_value": "The value that the column will be checked against, which could be a numerical or string value.",
        "new_value": "New value for the column that will be updated, including numerical values, strings, or expressions with other columns.",
        "table": "Name of the table to update"
      },
      "changeable_areas_colors": {
        "column_to_check": "#f2f2f2",
        "column_to_update": "#e5d8bd",
        "condition_value": "#b3e2cd",
        "new_value": "#fddaec",
        "table": "#ffe4a8"
      },
      "lines": [
        "UPDATE @@table@@",
        "SET @@column_to_update@@ = @@new_value@@",
        "WHERE @@column_to_check@@ = @@condition_value@@;"
      ]
    },
    "goal": "Update the value of a column in all records meeting a condition",
    "group": "1",
    "order": 1,
    "plan_metadata": {
      "description": "This is a plan",
      "instruction": "To use this plan, follow these steps...",
      "usage": "This plan is used when..."
    },
    "plan_name": "Update Records Conditionally",
    "id": 8,
    "questions": [
      {
        "type": "Clickable Areas",
        "question_id": "Clickable Areas_1",
        "stem": "You need to update the email addresses of users in a database if their current email address matches a certain condition. Click on the field that you would need to change to check if the email column in the given table is 'test@email.com'.",
        "area": "new_value",
        "correct": "'a_new_value'",
        "areas": [
          "condition_value",
          "column_to_check"
        ]
      },
      {
        "type": "Clickable Areas",
        "question_id": "Clickable Areas_2",
        "stem": "You need to update the verification status of users in a database if their current email address matches a certain condition. Click on the field that you would need to change to set the verified_status column to True.",
        "areas": [
          "column_to_update",
          "new_value"
        ]
      },
      {
        "type": "True/False",
        "question_id": "True/False_1",
        "stem": "In a database of customer records, you want to update all records with an email of 'test@email.com' by setting their 'column_name' to 'a_new_value'. The query 'UPDATE table_name SET column_name = 'a_new_value' WHERE column1 = 'test@email.com';' will achieve this goal.",
        "label": "True",
        "feedback": "Ensure that the column being checked is correctly specified and that the new value is being set to the desired column."
      }
    ]
  }
]